<!DOCTYPE html>
<html lang="ne">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>नेपाली क्यालेन्डर</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Mukta:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
            background-color: #f4f7f6; 
            font-family: 'Mukta', sans-serif;
        }
        .container { 
            background: white; 
            padding: 60px; 
            border-radius: 35px; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.1); 
            text-align: center;
            width: 350px;
            border-bottom: 8px solid #d32f2f;
        }
        .label { 
            color: #d32f2f; 
            font-size: 1.2rem; 
            margin-bottom: 15px; 
            font-weight: 600;
            letter-spacing: 1px;
        }
        .date { 
            color: #2c3e50; 
            font-size: 5rem; 
            font-weight: 700; 
            line-height: 1;
            margin-bottom: 10px;
            display: block;
        }
        .day {
            color: #1a73e8; /* Blue color for the day */
            font-size: 3rem;
            font-weight: 600;
            display: block;
        }
        .loading { font-style: italic; color: #999; }
    </style>
</head>
<body>

<div class="container">
    <div class="label">आजको मिति र बार</div>
    <div id="display" class="loading">विवरण लोड हुँदैछ...</div>
</div>

<script>
    // 1. Converts 123 to १२३
    function toNepaliNum(numStr) {
        const nepaliDigits = {'0':'०','1':'१','2':'२','3':'३','4':'४','5':'५','6':'६','7':'७','8':'८','9':'९'};
        return numStr.toString().replace(/\d/g, m => nepaliDigits[m]);
    }

    // 2. Converts English Days to Nepali Days
    function toNepaliDay(dayStr) {
        const days = {
            'Sunday': 'आइतबार',
            'Monday': 'सोमबार',
            'Tuesday': 'मंगलबार',
            'Wednesday': 'बुधबार',
            'Thursday': 'बिहीबार',
            'Friday': 'शुक्रबार',
            'Saturday': 'शनिबार'
        };
        // If the day is found in our list, return Nepali. Otherwise, keep original.
        return days[dayStr.trim()] || dayStr;
    }

    const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vR1j0Eg0SoVXbx-mgkpKVe1V7h9NbbSql74IVljp8MJBMH0QYdxWifCd_fNHwf8if1ZvqfJ1nxavEG3/pub?gid=1961353289&single=true&output=csv';
    const proxyUrl = 'https://corsproxy.io/?' + encodeURIComponent(csvUrl);

    async function updateCalendar() {
        try {
            const response = await fetch(proxyUrl);
            const data = await response.text();
            
            const rows = data.split('\n');
            const targetRow = rows[1].split(',');
            
            const rawBS = targetRow[1].trim(); 
            const rawDay = targetRow[2].trim(); 

            // Apply conversions
            const finalDate = toNepaliNum(rawBS);
            const finalDay = toNepaliDay(rawDay);

            document.getElementById('display').innerHTML = `
                <span class="date">${finalDate}</span>
                <span class="day">${finalDay}</span>
            `;
            document.getElementById('display').classList.remove('loading');
        } catch (e) {
            document.getElementById('display').innerHTML = "त्रुटि: पुन: प्रयास गर्नुहोस्";
        }
    }

    updateCalendar();
</script>

</body>
</html>